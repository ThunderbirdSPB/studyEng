<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="..\common\dropDef.css">
    <link rel="stylesheet" type="text/css" href="..\common\header.css">
    <!--    <link rel="stylesheet" type="text/css" href="dictionary.css">-->
    <!--    <script src ="dictionary.js"></script>-->
    <title>dictionary</title>

    <!---------------------------------Main-------------------------->
    <style>
        body{
            background-color: #2D2E2F;
        }

        img{
            cursor: pointer;
            height: 30px;
        }

        .dic-container{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        .add-word-show{
            display: flex;
            width: 50%;
            min-width: 442px;
            justify-content: flex-start;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .add-word-hide{
            display: none;
        }

        .aw-input{
            width: 80%;
            min-width: 180px;
            background-color: #2D3742;
            height: 35px;
            border: none;
            -moz-border-radius: 8px;
            -webkit-border-radius: 8px;
            border-radius: 8px;

            font-family: JosefinSans-Bold;
            font-size:20px;
            font-weight: 300;
            color:#BED2E6;

            padding-left: 10px;
            outline:none;

            margin-right: 10px;
        }

        #aw-btn{
            width: 160px;
            height: 35px;
            background-color: #BED2E6;

            border: none;
            -moz-border-radius: 8px;
            -webkit-border-radius: 8px;
            border-radius: 8px;

            font-size: 17px;
        }

        #aw-btn:hover{
            cursor: pointer;
        }

        #aw-btn:active{
            background-color: #7097D5;
            transition: 0.1s;
        }

        #aw-btn:active, #aw-btn:focus{
            outline: none;
        }
    </style>

    <!---------------------------------Table-------------------------->
    <style>
        #words-table {
            width: 65%;
        }

        .words-table-row {
            border-bottom: #919191 solid 1px;
            text-align: left;
        }

        .words-table-row > td {
            padding: 15px 7px;
            font-family: "Times New Roman", Times, serif;
            font-size: 20px;
            font-weight: normal;
        }

        .word {
            color: #7298C9;
        }

        .translation {
            color: #72C981;
        }

        .cursor-pointer:hover{
            cursor: pointer;
        }

        .index{
            color: chocolate;
        }

        .index:hover{
            cursor: default;
        }

        .select-word-checkbox{
            width: 20px;
            height: 20px;
        }

        .select-word-checkbox:hover{
            cursor: pointer;
        }

        .show-more{
            display: inline-block;
            width: 60%;
            padding-left: 40%;
            cursor: pointer;
            margin-top: 30px;
            color: #5CA10C;
            font-size: 150%;
        }
    </style>

    <!---------------------------------Slider------------------------->
    <style>
        .slider {
            /*width: 50%;*/
            max-width: 750px;
            min-width: 500px;
            position: relative;
            overflow: hidden;
            margin-top: 5px;
        }

        .slider__wrapper {
            display: flex;
            transition: transform 0.2s ease;
            justify-content: space-between;
        }

        .slider__item {
            flex: 0 0 auto;

            width: 250px;
            height: 250px;
        }

        .slider__control {
            position: absolute;
            top: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            width: 40px;
            color: #fff;
            text-align: center;
            opacity: 0.5;
            height: 50px;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, .5);

            z-index: 3;
        }

        .slider__control_show {
            display: flex;
        }

        .slider__control:hover,
        .slider__control:focus {
            color: #fff;
            text-decoration: none;
            outline: 0;
            opacity: .9;
        }

        .slider__control_left {
            left: 1px;
        }

        .slider__control_right {
            right: 11px;
        }

        .slider__control::before {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            background: transparent no-repeat center center;
            background-size: 100% 100%;
        }

        .slider__control_left::before {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E");
        }

        .slider__control_right::before {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E");
        }

        .ws__item{
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            justify-items: center;
            height: 250px;

            border-radius: 22px;

            margin-right: 10px;
        }

        .shadowWS_onSelection{
            position: absolute;
            background-color: #081439;
            z-index: 2; opacity: 0.4;
            height: 250px;
            width:240px;

            border-radius: 22px;
        }

        .ws__item:hover{
            cursor: pointer;
        }

        .si-edit-delete {
            display: flex;
            flex-direction: row;
            justify-content: flex-end;

            z-index: 3;
        }

        .si-edit-delete > div {
            height: 50px;
            width: 50px;
        }

        .si-num-name {
            display: flex;
            flex-direction: column;
            align-items: center;

            font-size: 19px;
            color: black;
            background-color: #2D3742;
            opacity: 0.95;

            border-radius: 0 0 20px 20px;
        }

        .si-num-name-hide, .si-edit-delete-hide {
            visibility: hidden;
        }
    </style>

    <!------------------------------Word Popup------------------------>
    <style>
        .shadow{
            position: fixed;
            width: 100%;
            height: 100%;
            background-color: grey;
            opacity: 0.3;
            z-index: 4;
        }

        .popup-container {
            width: 100%;
            height: 100%;
            position: fixed;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 5;
        }

        .popup-container:hover {
            cursor: pointer;
        }

        .popup {
            width: 500px;
            border-radius: 24px;
        }

        .popup:hover{
            cursor: default;
        }

        .popup-word {
            background-color: #2D3742;
            border-radius: 20px 20px 0 0;
        }

        .popup-word > span{
            font-family: JosefinSans-Bold;
            font-size: 30px;
            color: chocolate;
            line-height: 1.2;
            text-align: center;
            display: block;
            width: 100%;

            padding-top: 30px;
            padding-bottom: 29px;
        }

        .popup-translation-wrapper{
            display: flex;
            flex-direction: column;
            background-color: white;
            min-height: 200px;
        }

        .popup-translation{
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .popup-translation > span {
            font-family: JosefinSans-Bold;
            font-size: 25px;
            color: black;
            line-height: 1.2;
            text-align: center;
            display: block;
            width: 100%;
            margin-top: 5px;
            margin-bottom: 5px;
        }

        .popup-add-translation-wrapper > span{
            font-size: 20px;
            font-style: italic;
        }

        .popup-add-translation-wrapper > span:hover{
            cursor: pointer;
        }

        .popup-translation-input {
            display: flex;

            justify-content: flex-end;
            align-items: center;
            margin-bottom: 20px;
            margin-top: 10px;
        }

        .popup-translation-input > input {
            display: block;
            background-color: #BED2E6;
            align-self: center;
            width: 50%;
            height: 40px;

            font-family: JosefinSans-Bold;
            font-size: 21px;
            color: black;

            outline:none;
            padding: 0 35px 0 35px;

            border-radius: 27px;
            border: none;
        }

        .popup-translation-input > input::placeholder{
            color: #2D2E2F;
        }

        .popup-translation-input > button{
            width: 100px;
            height: 40px;
            background-color: #BED2E6;
            border: none;
            border-radius: 20px;

            font-family: JosefinSans-Bold;
            font-size: 20px;
            outline:none;
            color: black;

            margin-left: 10px;
        }

        .popup-translation-input > button:hover{
            cursor: pointer;
        }

        .popup-translation-input > button:active{
            outline: none;
            background-color: #9FC3E8;

        }

        .popup-example-wrapper{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #2D3742;
            border-radius: 0 0 20px 20px ;
            min-height: 100px;
        }

        .popup-example{
            display: block;
            max-width: 450px;
        }

        .popup-example > span{
            display: block;
            max-width: 450px;
            /*width: 100%;*/

            font-family: JosefinSans-Bold;
            font-size: 23px;
            color: chocolate;
            line-height: 1.2;
            text-align: center;



            padding-top: 29px;
            padding-bottom: 29px;
        }

        .popup-example > span:hover{
            cursor: pointer;
        }

        .example-span:hover{
            cursor: default;
        }
    </style>

    <!----------------------------WordSet Popup---------------------->
    <style>
        .ws-popup-container{
            width: 100%;
            height: 100%;
            position: fixed;
            z-index: 5;

            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .ws-popup-container:hover {
            cursor: pointer;
        }

        .ws-popup {
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            align-items: center;

            width: 400px;
            height: 200px;

            background-color: #2D3742;
        }

        .ws-popup:hover{
            cursor: default;
        }

        .input__wrapper {
            width: 100%;
            position: relative;
            margin: 15px 0;
            text-align: center;
        }

        .input__file {
            opacity: 0;
            visibility: hidden;
            position: absolute;
        }

        .input__file-icon-wrapper {
            height: 60px;
            width: 60px;
            margin-right: 15px;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            border-right: 1px solid #fff;
        }

        .input__file-button-text {
            line-height: 1;
            margin-top: 1px;
        }

        .input__file-button {
            width: 100%;
            max-width: 290px;
            height: 60px;
            background: #2D2E2F;
            color: chocolate;
            font-size: 1.5rem;
            font-weight: 700;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-pack: start;
            -ms-flex-pack: start;
            justify-content: flex-start;
            border-radius: 3px;
            cursor: pointer;
            margin: 0 auto;
        }


        .ws-name-input{
            display: block;
            background-color: #BED2E6;
            width: 72%;
            height: 50px;
            border:2px solid #2D3742;


            font-family: JosefinSans-Bold;
            font-size: 21px;
            outline:none;
            padding: 0 35px 0 35px;

            border-radius: 27px;
            color: black;
        }

        .ws-name-input::placeholder{
            color: #2D2E2F;
        }



        .ws-popup > button{
            width: 100px;
            height: 30px;
            background-color: #BED2E6;

            border: none;
            border-radius: 20px;
            font-size: 17px;
            margin-bottom: 20px;
        }

        .ws-popup > button:hover{
            cursor: pointer;
        }

        .ws-popup > button:active{
            outline: none;
            background-color: #9FC3E8;
            width: 105px;
        }

    </style>

    <!-------------------------------On Select------------------------>
    <style>
        .options-show {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6.5px;
            margin-top: 4.5px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            background-color: #E1E1E2;
            width: 483px;
        }

        .options-hide {
            display: none;
        }

        .options-show ul {
            font-size: 0;
            list-style-type: none;
        }

        .options-show ul li {
            font-family: "Open Sans", sans-serif;
            font-size: 1rem;
            font-weight: 400;
            color: #333;
            display: inline-block;
            padding: 15px;
            position: relative;
        }

        .options-show ul li ul {
            display: none;
        }

        .options-show ul li:hover {
            cursor: pointer;
            background-color: #f2f2f2;
        }

        .options-show ul li:hover ul {
            display: block;
            margin-top: 15px;
            width: 200px;
            left: 0;
            position: absolute;
        }

        .options-show ul li:hover ul li {
            display: block;
            background-color: #e7e7e7;
        }

        .options-show ul li:hover ul li span {
            float: right;
            color: #f9f9f9;
            background-color: #F03861;
            padding: 2px 5px;
            text-align: center;
            font-size: .8rem;
            border-radius: 3px;
        }

        .options-show ul li:hover ul li:hover {
            background-color: #e0e0e0;
        }

        .options-show ul li:hover ul li:hover span {
            background-color: #ee204e;
        }

        .options-main-ul > li {
            z-index: 3;
        }
    </style>

    <!---------------------------------Loader-------------------------->
    <style>
        @import url(https://fonts.googleapis.com/css?family=Raleway+Dots);

        /** {*/
        /*    margin:0;padding:0;*/
        /*    outline:0;list-style:none;*/
        /*    font-family: 'Raleway Dots', cursive;*/
        /*}*/

        /*body {*/
        /*    background-color: #fff;*/
        /*    background: url('data:image/png;base64,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');*/
        /*}*/


        .loader{
            position: fixed;
            top: 45%;
            left: 45%;
            z-index: 5;

            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        p{
            width: 200px;
            text-align: center;
        }
        p:before {
            position: relative;
            top: 0;
            content: attr(title);
            color: #aaa;
        }
    </style>
</head>
<body onload="init()">
<header>
    <div class="header">
        <ul class="header-ul">
            <a class="header-a" href="#"><li>Грамматика</li></a>
            <a class="header-a" href="../dictionary/dictionary.html"><li>Словарь</li></a>
            <a class="header-a" href="../trainings/trainings.html"><li>Тренировки</li></a>
            <a class="header-a" href="#"><li>Контент</li></a>
        </ul>

        <img class="profile-pic" src="..\images\user_pic.png">
    </div>
</header>

<div class="dic-container">
    <div id="options-container" class="options-hide">
        <ul class="options-main-ul">
            <li>Отправить на тренировку
                <ul>
                    <li trainingId="1" onclick="onMoveToTrainings(event)">Русский - Английский</li>
                    <li trainingId="2" onclick="onMoveToTrainings(event)">Английский - Русский</li>
                    <li trainingId="4" onclick="onMoveToTrainings(event)">Знаю - Не знаю</li>
                    <li trainingId="3" onclick="onMoveToTrainings(event)">Правописание</li>
                </ul>
            </li>
            <li class="options-ws-list">Отправить в набор</li>
            <li onclick="onRemoveWordsFromWS()">Удалить</li>
        </ul>
    </div>

    <form id="add-word-form" class="add-word-show">
        <input id="word-input" class="aw-input" type="text" placeholder="Слово" required/>
        <input id="translation-input" class="aw-input" type="text" placeholder="Перевод" required/>
        <input type="button" value="Добавить" id="aw-btn" onclick="addWord()">
    </form>

    <div class="slider">
        <div class="slider__wrapper">
            <div id="addWsDiv" class="slider__item">
                <div class="ws__item" style="justify-content: center; align-items: center; background-color: rgba(160,230,256,.1);" onclick="addWSListener()">
                    <img src="../images/plus-sign.png" style = "height: 125px; width: 125px;">
                    <!--                    <div style='background-image: url("../images/plus-sign.png"); background-repeat: no-repeat'>-->
                    <!--                    </div>-->
                </div>
            </div>
        </div>
        <a class="slider__control slider__control_left" href="#" role="button"></a>
        <a class="slider__control slider__control_right slider__control_show" href="#" role="button"></a>
    </div>

    <table id="words-table">
        <tbody></tbody>
    </table>

    <div id="show">
        <p class="show-more">
            Show more...
        </p>
    </div>
</div>

<button onclick="exitListener()" style="margin-left: 30%; width: 100px; height: 100px; background-color: #5CA10C">
    Exit
</button>

<!--Options-->
<script>
    let checkBoxes;

    /**
     * Добавляет актуальные WS в options
     */
    function updateWSOptions() {
        let wsList = document.querySelector(".options-ws-list");
        wsList.style.display ="";

        if (document.querySelector(".options-ws-list > ul") !== null)
            document.querySelector(".options-ws-list > ul").remove();

        if (wordSets_idMap.size === 1) {
            wsList.style.display = "none";
            return;
        }

        let ul = document.createElement("ul");

        for (let ws of wordSets_idMap.values()){
            if (ws["main"] === true)
                continue;
            let li = document.createElement("li");
            li.textContent = ws["name"];
            li.setAttribute("wordSetId", ws["wordSetId"]);
            li.addEventListener("click", () => onMoveWordsToWS(ws["wordSetId"]));
            ul.append(li);
        }

        wsList.append(ul);
    }

    function onMoveToTrainings(event) {
        let trainingId = event.currentTarget.getAttribute("trainingId");
        let wordIds = getSelectedRows().map(item => item.getAttribute("word-id"));

        fetch(PATH + "trainings/moveWordsToLearning?trainingId=" + trainingId + "&wordId=" + wordIds.join(","),{
            method: "POST"
        });

        dropSelection();
        toggleAwFormAndOptions();
    }
    function onMoveWordsToWS(wordSetId){
        let wordIds = [];

        for (let checkBox of getSelectedCheckBoxes())
            wordIds.push(checkBox.parentElement.parentElement.getAttribute("word-id"));

        fetch(PATH + "dictionary/addWordsToWordSet?wordSetId="+wordSetId + "&wordId=" + wordIds.join(","), {
            method:'POST'
        });


        dropSelection();
        toggleAwFormAndOptions();
    }
    function onRemoveWordsFromWS() {
        let wordIds = [];
        let checkBoxes = getSelectedCheckBoxes();

        checkBoxes.forEach(checkBox => wordIds.push(checkBox.parentElement.parentElement.getAttribute("word-id")));

        if (confirm("Вы уверены, что хотите удалить выбранные слова?")){
            removeWords(wordIds);

            checkBoxes.forEach(checkBox => checkBox.parentElement.parentElement.remove());
            toggleAwFormAndOptions();
            resetIndexes();
        }
    }

    function toggleAwFormAndOptions() {
        //Live HtmlCollection
        if(checkBoxes == null)
            checkBoxes = document.getElementsByClassName("select-word-checkbox");

        if (getSelectedCheckBoxes().length > 0)
            hideAwForm();
        else
            hideOptions();
    }
    function hideAwForm() {
        document.getElementById("options-container").classList.remove("options-hide");
        document.getElementById("options-container").classList.add("options-show");

        document.getElementById("add-word-form").classList.remove("add-word-show");
        document.getElementById("add-word-form").classList.add("add-word-hide");
    }
    function hideOptions() {
        document.getElementById("options-container").classList.add("options-hide");
        document.getElementById("options-container").classList.remove("options-show");

        document.getElementById("add-word-form").classList.add("add-word-show");
        document.getElementById("add-word-form").classList.remove("add-word-hide");
    }

    function getSelectedCheckBoxes() {
        let selected = [];
        for (let checkBox of checkBoxes)
            if (checkBox.checked)
                selected.push(checkBox);

        return selected;
    }

    function dropSelection() {
        getSelectedCheckBoxes().forEach(checkBox => checkBox.checked = false);
    }
</script>

<!--Slider-->
<script>
    function createSlider() {
        let
            _mainElement = document.querySelector(".slider"), // основный элемент блока
            _sliderWrapper = _mainElement.querySelector('.slider__wrapper'), // обертка для .slider-item
            _sliderItems = _mainElement.querySelectorAll('.slider__item'), // элементы (.slider-item)
            _sliderControls = _mainElement.querySelectorAll('.slider__control'), // элементы управления
            _sliderControlLeft = _mainElement.querySelector('.slider__control_left'), // кнопка "LEFT"
            _sliderControlRight = _mainElement.querySelector('.slider__control_right'), // кнопка "RIGHT"
            _wrapperWidth = parseFloat(getComputedStyle(_sliderWrapper).width), // ширина обёртки
            _itemWidth = parseFloat(getComputedStyle(_sliderItems[0]).width), // ширина одного элемента
            _positionLeftItem = 0, // позиция левого активного элемента
            _transform = 0, // значение транфсофрмации .slider_wrapper
            _step = _itemWidth / _wrapperWidth * 100, // величина шага (для трансформации)
            _items = []; // массив элементов
        // наполнение массива _items
        _sliderItems.forEach(function (item, index) {
            _items.push({ item: item, position: index, transform: 0 });
        });

        let position = {
            getMin: 0,
            getMax: _items.length - 1,
        };

        let _transformItem = function (direction) {
            if (direction === 'right') {
                if ((_positionLeftItem + _wrapperWidth / _itemWidth - 1) >= position.getMax) {
                    return;
                }
                if (!_sliderControlLeft.classList.contains('slider__control_show'))
                    _sliderControlLeft.classList.add('slider__control_show');

                if (_sliderControlRight.classList.contains('slider__control_show') && (_positionLeftItem + _wrapperWidth / _itemWidth) >= position.getMax)
                    _sliderControlRight.classList.remove('slider__control_show');

                _positionLeftItem++;
                _transform -= _step;
            }
            if (direction === 'left') {
                if (_positionLeftItem <= position.getMin) {
                    return;
                }
                if (!_sliderControlRight.classList.contains('slider__control_show')) {
                    _sliderControlRight.classList.add('slider__control_show');
                }
                if (_sliderControlLeft.classList.contains('slider__control_show') && _positionLeftItem - 1 <= position.getMin) {
                    _sliderControlLeft.classList.remove('slider__control_show');
                }
                _positionLeftItem--;
                _transform += _step;
            }
            _sliderWrapper.style.transform = 'translateX(' + _transform + '%)';
        };

        // обработчик события click для кнопок "назад" и "вперед"
        let _controlClick = function (e) {
            if (e.target.classList.contains('slider__control')) {
                e.preventDefault();
                let direction = e.target.classList.contains('slider__control_right') ? 'right' : 'left';
                _transformItem(direction);
            }
        };

        let _setUpListeners = function () {
            // добавление к кнопкам "назад" и "вперед" обрботчика _controlClick для событя click
            _sliderControls.forEach(function (item) {
                item.addEventListener('click', _controlClick);
            });
        };

        // инициализация
        _setUpListeners();

        return {
            right: function () { // метод right
                _transformItem('right');
            },
            left: function () { // метод left
                _transformItem('left');
            }
        }
    }
</script>

<!--Reduce bandwidth-->
<script>
    async function addWordSetsPicture(file) {
        // let base64ImageData = "/9j/4AAQSkZJRgABAQEAYABgAAD/2wCEAA0JCgs";
        // let formData = reduceImgTransferBandwidth(base64ImageData);
    }
    function reduceImgTransferBandwidth(pimagedata) {
        let form = document.createElement("myForm");
        let ImageURL = "data:image/gif;base64," + pimagedata;
        let block = ImageURL.split(";");
        let contentType = block[0].split(":")[1];
        let realData = block[1].split(",")[1];
        let blob = b64toBlob(realData, contentType);
        let formDataToUpload = new FormData(form);

        formDataToUpload.append("image", blob);

        return formDataToUpload;
    }
    function b64toBlob(b64Data, contentType, sliceSize) {
        contentType = contentType || '';
        sliceSize = sliceSize || 512;

        let byteCharacters = atob(b64Data);
        let byteArrays = [];

        for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
            let slice = byteCharacters.slice(offset, offset + sliceSize);

            let byteNumbers = new Array(slice.length);
            for (let i = 0; i < slice.length; i++) {
                byteNumbers[i] = slice.charCodeAt(i);
            }

            let byteArray = new Uint8Array(byteNumbers);

            byteArrays.push(byteArray);
        }

        return new Blob(byteArrays, {
            type : contentType
        });
    }
</script>

<!--WordSet-->
<script>
    const shadowWS_onSelection = document.createElement("div");
    shadowWS_onSelection.classList.add("shadowWS_onSelection");

    async function getWordSets(){
        let response = await fetch(PATH +"dictionary/getWordSets");

        if (response.status === 401){
            alert("U're not authorized");
            return;
        }

        do{
            response = await fetch(PATH + "dictionary/getWordSets",{
                method: 'GET',
                headers:{
                    'handling':"true"
                }
            });

            if (response.headers.get("ready") === "false")
                await new Promise(resolve => setTimeout(resolve, 1000));
        }while (response.headers.get("ready") === "false");

        if (response.ok)
            return await response.json();
        else
            alert("Smt wrong");
    }

    function addWSToSlider(wordSets){
        for (let wordSet of wordSets){
            wordSets_idMap.set(+wordSet["wordSetId"], wordSet);
            console.log(wordSet["wordSetId"] + " "  + wordSet["name"] + " "  + wordSet["main"]);
            let wsWrapper = document.querySelector(".slider__wrapper");
            let sliderItem = createSliderItem(wordSet, false);

            if (wordSet["main"] === true) {
                document.getElementById("addWsDiv").after(sliderItem);
                sliderItem.firstElementChild.prepend(shadowWS_onSelection);
            }
            else
                wsWrapper.append(sliderItem);

            // let img = document.createElement("img");
            // img.src = URL.createObjectURL(b64toBlob(wordSet["image"]));
        }
    }

    async function OnWSSelection(event) {
        let target = event.currentTarget;
        currentWordSet = wordSets_idMap.get(+target.getAttribute("wordSetId"));

        event.stopPropagation();
        createLoader();
        DBIndex = 1;
        word_idMap.clear();
        hideOptions();

        let words = await getWordsFromWS(event.currentTarget.getAttribute("wordSetId"));

        removeWordsFromTable();
        addWordsToTable(words);
        resetIndexes();
        setListeners();

        removeLoader();
        toggleSelectedWS(target);
    }

    async function getWordsFromWS(wordSetId) {
        let response = await fetch(PATH + "dictionary/getWordsFromWordSet?index=" + DBIndex + "&wordSetId=" + wordSetId);

        if (response.status === 401){
            alert("U're not authorized");
            return;
        }

        if (response.status === 400){
            alert("Wrong index");
            return;
        }

        do{
            response = await fetch(PATH + "dictionary/getWordsFromWordSet",{
                method: 'GET',
                headers:{
                    'handling':"true"
                }
            });

            if (response.headers.get("ready") === "false")
                await new Promise(resolve => setTimeout(resolve, 10));
        }while (response.headers.get("ready") === "false");

        if (response.ok){
            console.log("Getting words from WS: OK");
            try{
                return await response.json();
            }catch (e) {}
        }
        else
            alert("Smt wrong");
        return null;
    }

    function addWordToWordSet(wordId){
        fetch(PATH + "dictionary/addWordsToWordSet?wordId="+wordId +"&wordSetId=" + currentWordSet["wordSetId"],{
            method:'POST'
        });
    }

    function removeWordFromWS(wordIds) {
        fetch(PATH + "dictionary/removeWordsFromWordSet?wordId=" + wordIds.join(",") + "&wordSetId=" + currentWordSet["wordSetId"],{
            method:'POST',
        });
    }


    function addWSListener() {
        createWordSetPopup();
        setAddWSPopupListeners();
    }
    function editWSListener(event) {
        event.stopPropagation();
        let parentDiv = event.target.closest(".ws__item");
        createWordSetPopup();
        setEditWSPopupListeners(+parentDiv.getAttribute("wordSetId"), parentDiv);

        document.querySelector(".ws-popup > button").textContent = "Сохранить";
        document.querySelector(".ws-popup > input").value = parentDiv.querySelector(".si-num-name > div").textContent;
    }
    function removeWSListener(event) {
        event.stopPropagation();
        let parentDiv = event.target.closest(".ws__item");
        parentDiv.parentElement.remove();

        sendRemoveWSData(parentDiv.getAttribute("wordSetId"));
        wordSets_idMap.delete(+parentDiv.getAttribute("wordSetId"));
        updateWSOptions();

    }


    function setAddWSPopupListeners() {
        let wsUploadBtn = document.querySelector(".ws-popup > button");
        let wsPopupContainer = document.querySelector(".ws-popup-container");
        let wsPopup = document.querySelector(".ws-popup");

        wsPopupContainer.addEventListener("click", () => removeWSPopup());
        wsPopup.addEventListener("click", (event) => event.stopPropagation());
        wsUploadBtn.addEventListener("click", async function () {
            if (!checkWSName() || !(await checkWSImg())) {
                return;
            }

            addNewSliderItem();
            await sendAddWSData();
            removeWSPopup();
            updateWSOptions();
            createSlider();
        });
    }
    function setEditWSPopupListeners(wordSetId, parentDiv) {
        let wsUploadBtn = document.querySelector(".ws-popup > button");
        let wsPopupContainer = document.querySelector(".ws-popup-container");
        let wsPopup = document.querySelector(".ws-popup");

        wsPopupContainer.addEventListener("click", () => removeWSPopup());
        wsPopup.addEventListener("click", (event) => event.stopPropagation());
        wsUploadBtn.addEventListener("click", function () {
            if (!checkWSName() || !checkWSImg())
                return;

            replaceSliderItem(parentDiv, wordSetId);
            sendEditWSData(wordSetId);
            removeWSPopup();
            updateWSOptions();
        });
    }


    function addNewSliderItem() {
        let mainWordSet = document.querySelector(".main-ws");

        let wordSet = {};
        wordSet["wordSetId"] = -1;
        wordSet["main"] = false;
        wordSet["size"] = 0;
        wordSet["name"] = document.querySelector(".ws-name-input").value;
        try{
            if (document.getElementById("input__file").files.length !== 0)
                wordSet["image"] = URL.createObjectURL(document.getElementById("input__file").files[0]);
            else
                wordSet["image"] = document.querySelectorAll(".slider__item")[1].style.backgroundImage;
        }catch (e) {
            console.log("default ws pic");
        }

        mainWordSet.after(createSliderItem(wordSet, true));
    }
    function replaceSliderItem(parentDiv, wordSetId) {
        let img = new Image();
        try{
            img.src = URL.createObjectURL(document.getElementById("input__file").files[0]);
            img.onload = function (){
                parentDiv.style.backgroundImage = "url(" + img.src + ")";
            };
        }catch (e) {}


        parentDiv.querySelector(".si-num-name > div").textContent = document.querySelector(".ws-name-input").value.trim();

        let ws = wordSets_idMap.get(wordSetId);
        ws["image"] = img.src;
        ws["name"] = document.querySelector(".ws-name-input").value.trim();
    }

    /**
     * Отправляет данные на сервер
     * Добавляет в wordSets_idMap новый ws
     */
    async function sendAddWSData() {
        let img = document.getElementById("input__file").files[0];
        let name = document.querySelector(".ws-name-input").value;

        let wordSet = {};
        wordSet["name"] = name;
        wordSet["size"] = 0;
        wordSet["isMain"] = false;
        wordSet["image"] = img === undefined? null : img;

        let formData = new FormData();
        formData.append("file", img);

        let response = await fetch(PATH + "dictionary/addWordSet", {
            method: "POST",
            headers: {
                "name":name
            },
            body: formData
        });

        if (response.status === 401 || response.status === 400){
            alert("U're not authorized or bad request");
            return;
        }

        if (!response.ok)
            alert("Some strange mistake");

        do{
            response = await fetch(PATH + "dictionary/addWordSet",{
                method: 'POST',
                headers:{
                    'handling':"true"
                }
            });

            if(response.headers.get("ready") === "false")
                await new Promise(resolve => setTimeout(resolve, 10));
            console.log("ready " + response.headers.get("ready"));
        }while (response.headers.get("ready") === "false");

        if (response.status === 500)
            alert("Oops smt wrong");

        if(response.ok) {
            try{
                wordSet["wordSetId"] = Number.parseInt(response.headers.get("wordSetId"));
                wordSets_idMap.set(wordSet["wordSetId"], wordSet);
                wordSets_idMap.delete(-1);
                document.querySelector("div[wordSetId='-1']").setAttribute("wordSetId", wordSet["wordSetId"]+"");
            }catch (e) {}
        }
    }
    function sendEditWSData(wordSetId) {
        let img = document.getElementById("input__file").files[0];
        let name = document.querySelector(".ws-name-input").value.trim();
        let formData = new FormData();

        if (img !== null)
            formData.append("file", img);

        fetch(PATH + "dictionary/updateWordSet", {
            method: "POST",
            headers: {
                "name": name,
                "wordSetId": wordSetId
            },
            body: formData
        });
    }
    function sendRemoveWSData(wordSetId) {
        fetch(PATH + "dictionary/removeWordSet", {
            method: "POST",
            headers: {
                "wordSetId": wordSetId
            },
        });
    }

    function checkWSName() {
        let name = document.querySelector(".ws-popup > input").value.trim();
        if (name === ""){
            alert("Введите название");
            return false;
        }

        if (name.length > 30){
            alert("Название слишком длинное");
            return false;
        }
        return true;
    }
    async function checkWSImg() {
        let img = new Image();
        try{
            img.src = URL.createObjectURL(document.getElementById("input__file").files[0]);
            if(document.getElementById("input__file").files[0].type.indexOf("image") === -1) {
                alert("Данный тип файла не поддерживается");
                return false;
            }
        }catch (e) {
            return true;
        }

        let flag;

        img.onload = function () {
            let width  = img.naturalWidth  || img.width;
            let height = img.naturalHeight || img.height;

            if(img.size > 102400) {
                alert("Размер обложки слишком большой, максимум: 100кб");
                flag = false;
                return;
            }

            if(width > 300 || height > 300) {
                alert("Размер обложки слишком большой, максимум 300х300px");
                flag = false;
                return;
            }
            flag = true;
        };

        while(!(img.naturalWidth  || img.width) || !img.src){
            console.log(img.src);
            console.log(img.size);
            await new Promise(resolve => setTimeout(resolve, 10));
        }
        return flag;
    }


    function removeWSPopup(){
        document.getElementById("shadow").remove();
        document.getElementById("wsPopupContainer").remove();
        document.body.style.overflow = "";
    }
    function createWordSetPopup() {
        document.body.style.overflow = "hidden";

        let shadowDiv = document.createElement("div");
        shadowDiv.classList.add("shadow");
        shadowDiv.setAttribute("id", "shadow");


        let wsPopupContainer = document.createElement("div");
        wsPopupContainer.classList.add("ws-popup-container");
        wsPopupContainer.setAttribute("id", "wsPopupContainer");

        let wsPopup = document.createElement("div");
        wsPopup.classList.add("ws-popup");

        let inputName = document.createElement("input");
        inputName.setAttribute("type", "text");
        inputName.setAttribute("placeholder", "Название");
        inputName.classList.add("ws-name-input");

        let inputWrapper = document.createElement("div");
        inputWrapper.classList.add("input__wrapper");

        let fileInput = document.createElement("input");
        fileInput.setAttribute("type", "file");
        fileInput.setAttribute("id", "input__file");
        fileInput.classList.add("input");
        fileInput.classList.add("input__file");

        let fileLabel = document.createElement("label");
        fileLabel.setAttribute("for", "input__file");
        fileLabel.classList.add("input__file-button");

        let uploadSpanImg = document.createElement("span");
        uploadSpanImg.classList.add("input__file-icon-wrapper");

        let uploadImg = document.createElement("img");
        uploadImg.classList.add("input__file-icon");
        uploadImg.setAttribute("src",DOWNLOAD_PIC);
        uploadImg.setAttribute("alt","Выбрать файл");
        uploadImg.setAttribute("width","35px");

        let uploadSpanTxt = document.createElement("span");
        uploadSpanTxt.classList.add("input__file-button-text");
        uploadSpanTxt.textContent = "Выберите файл";

        let uploadBtn = document.createElement("button");
        uploadBtn.textContent = "Добавить";


        wsPopupContainer.append(wsPopup);
        wsPopup.append(inputName);
        wsPopup.append(inputWrapper);

        inputWrapper.append(fileInput);
        inputWrapper.append(fileLabel);

        fileLabel.append(uploadSpanImg);
        uploadSpanImg.append(uploadImg);
        fileLabel.append(uploadSpanTxt);

        wsPopup.append(uploadBtn);

        document.body.prepend(shadowDiv, wsPopupContainer);
    }

    function createSliderItem(wordSet, urlCreated) {
        wordSets_idMap.set(wordSet["wordSetId"], wordSet);

        let sliderItem = document.createElement("div");
        sliderItem.classList.add("slider__item");
        if(wordSet["main"] === true)
            sliderItem.classList.add("main-ws");

        let backgroundImgDiv = document.createElement("div");
        if (urlCreated)
            backgroundImgDiv.style.backgroundImage = "url('" + wordSet["image"] + "')";
        else
            backgroundImgDiv.style.backgroundImage = "url('" + URL.createObjectURL(b64toBlob(wordSet["image"])) + "')";
        backgroundImgDiv.setAttribute("wordSetId",wordSet["wordSetId"]);
        backgroundImgDiv.addEventListener("mouseover", ()=> backgroundImgDiv.querySelector(".si-edit-delete").classList.remove("si-edit-delete-hide"));
        backgroundImgDiv.addEventListener("mouseout", ()=> backgroundImgDiv.querySelector(".si-edit-delete").classList.add("si-edit-delete-hide"));
        backgroundImgDiv.addEventListener("click", OnWSSelection);
        backgroundImgDiv.classList.add("ws__item");

        let edit_deleteDiv = document.createElement("div");
        edit_deleteDiv.classList.add("si-edit-delete");
        edit_deleteDiv.classList.add("si-edit-delete-hide");
        if(wordSet["main"] === false) {
            let penImgDiv = document.createElement("div");
            penImgDiv.style.backgroundImage = "url('"+ PENCIL_PIC +"')";
            penImgDiv.style.backgroundColor = "#D4E3F2";
            penImgDiv.style.borderRadius = "30px";
            penImgDiv.addEventListener("click", editWSListener);

            let deleteImgDiv = document.createElement("div");
            deleteImgDiv.style.backgroundImage = "url('" + DELETE_SIGN + "')";
            deleteImgDiv.style.backgroundColor = "#D4E3F2";
            deleteImgDiv.style.borderRadius = "30px";
            deleteImgDiv.addEventListener("click", removeWSListener);

            edit_deleteDiv.append(penImgDiv);
            edit_deleteDiv.append(deleteImgDiv);
        }

        let numNameDiv = document.createElement("div");
        numNameDiv.classList.add("si-num-name");

        let numDiv = document.createElement("div");
        numDiv.textContent = wordSet["size"];

        let nameDiv = document.createElement("div");
        nameDiv.textContent = wordSet["name"];


        sliderItem.append(backgroundImgDiv);
        backgroundImgDiv.append(edit_deleteDiv);
        backgroundImgDiv.append(numNameDiv);
        numNameDiv.append(nameDiv);
        numNameDiv.append(numDiv);

        return sliderItem;
    }

    function toggleSelectedWS(target) {
        target.prepend(shadowWS_onSelection);
    }
</script>

<!--Word Popup-->
<script>
    function CreateWordPopup(event){
        document.body.style.overflow = "hidden";

        let rowTarget = event.currentTarget.closest(".words-table-row");

        let targetWord = word_idMap.get(+rowTarget.getAttribute("word-id"));
        let word = targetWord["word"];
        let wordId = +targetWord["id"];
        let translations = targetWord["translations"];
        let example = targetWord["example"];


        let shadowDiv = document.createElement("div");
        shadowDiv.classList.add("shadow");
        document.body.append(shadowDiv);


        let popupContainer = document.createElement("div");
        popupContainer.classList.add("popup-container");


        let popup = document.createElement("div");
        popup.classList.add("popup");
        popupContainer.append(popup);

        let popupWord = document.createElement("div");
        popupWord.classList.add("popup-word");
        let wordSpan = document.createElement("span");
        wordSpan.innerText = word;

        popup.append(popupWord);
        popupWord.append(wordSpan);


        let translationWrapper = document.createElement("div");
        translationWrapper.classList.add("popup-translation-wrapper");
        popup.append(translationWrapper);

        let addTranslationDiv = createAddTranslationDiv();

        for (let i = 0; i < translations.length; i++){
            let translation = translations[i];

            let translationDiv = document.createElement("div");
            translationDiv.classList.add("popup-translation");

            let translationSpan = document.createElement("span");
            translationSpan.textContent = translation;

            let deleteTranslationSign = document.createElement("img");
            deleteTranslationSign.setAttribute("height", "25px");
            deleteTranslationSign.setAttribute("width", "25px");
            deleteTranslationSign.setAttribute("src", DELETE_SIGN);

            translationSpan.append(deleteTranslationSign);
            translationWrapper.append(translationDiv);
            translationDiv.append(translationSpan);

            deleteTranslationSign.addEventListener("click", function (event) {
                let translation = event.currentTarget.previousSibling.textContent;
                fetch(PATH + "dictionary/removeTranslation",{
                    method:"POST",
                    body: JSON.stringify({"id":wordId, "translations":[translation]})
                });

                translationDiv.remove();
                translations.splice(translations.indexOf(translation), 1);

                if (!document.getElementById("addTranslationDiv"))
                    translationWrapper.append(addTranslationDiv);
            });
        }

        if (translations.length < 4)
            translationWrapper.append(addTranslationDiv);


        let exampleDivWrapper = document.createElement("div");
        exampleDivWrapper.classList.add("popup-example-wrapper");

        if (example === null || example === "")
            exampleDivWrapper.append(createAddExampleDiv());
        else
            exampleDivWrapper.append(createExampleDiv());

        function createAddTranslationDiv() {
            let addTranslationDiv = document.createElement("div");
            addTranslationDiv.classList.add("popup-translation");
            addTranslationDiv.classList.add("popup-add-translation-wrapper");
            addTranslationDiv.setAttribute("id", "addTranslationDiv");

            let addTranslationSpan = document.createElement("span");
            addTranslationSpan.textContent = "Добавить преревод";

            addTranslationDiv.append(addTranslationSpan);

            addTranslationSpan.addEventListener("click", function () {
                let inputTranslationDiv = document.createElement("div");
                inputTranslationDiv.classList.add("popup-translation-input");

                let translationInput = document.createElement("input");
                translationInput.setAttribute("type", "text");
                translationInput.setAttribute("placeholder", "Перевод");

                let addTranslationBtn = document.createElement("button");
                addTranslationBtn.textContent = "Добавить";

                addTranslationDiv.replaceWith(inputTranslationDiv);
                inputTranslationDiv.append(translationInput);
                inputTranslationDiv.append(addTranslationBtn);

                addTranslationBtn.addEventListener("click", function () {
                    let newTranslation = translationInput.value.trim();
                    translationInput.value = "";
                    if (newTranslation === ""){
                        inputTranslationDiv.replaceWith(addTranslationDiv);
                        return;
                    }else
                        inputTranslationDiv.remove();

                    fetch(PATH + "dictionary/addTranslation",{
                        method:"POST",
                        body: JSON.stringify({"id":wordId, "translations":[newTranslation]})
                    });


                    translations.push(newTranslation);

                    let translationDiv = document.createElement("div");
                    translationDiv.classList.add("popup-translation");

                    let translationSpan = document.createElement("span");
                    translationSpan.textContent = newTranslation;

                    let deleteTranslationSign = document.createElement("img");
                    deleteTranslationSign.setAttribute("height", "25px");
                    deleteTranslationSign.setAttribute("width", "25px");
                    deleteTranslationSign.setAttribute("src", DELETE_SIGN);

                    translationSpan.append(deleteTranslationSign);
                    translationDiv.append(translationSpan);
                    translationWrapper.append(translationDiv);

                    deleteTranslationSign.addEventListener("click", function (event) {
                        fetch(PATH + "dictionary/removeTranslation",{
                            method:"POST",
                            body: JSON.stringify({"id":wordId, "translations":[newTranslation]})
                        });

                        translationDiv.remove();
                        translations.splice(translations.indexOf(event.currentTarget.previousSibling.textContent), 1);

                        if (!document.getElementById("addTranslationDiv"))
                            translationWrapper.append(addTranslationDiv);
                    });

                    if (translations.length < 4)
                        translationWrapper.append(addTranslationDiv);
                })
            });
            return addTranslationDiv;
        }

        /**------------------------------------------------Example Part---------------------------------------------*/
        popup.append(exampleDivWrapper);


        function createAddExampleDiv() {
            let addExampleDiv = document.createElement("div");
            addExampleDiv.classList.add("popup-example");

            let addExampleSpan = document.createElement("span");
            addExampleSpan.textContent = "Добавить пример";
            addExampleDiv.append(addExampleSpan);

            addExampleSpan.addEventListener("click", function () {
                let inputExampleDiv = document.createElement("div");
                inputExampleDiv.classList.add("popup-translation-input");

                let exampleInput = document.createElement("input");
                exampleInput.setAttribute("type", "text");
                exampleInput.setAttribute("placeholder", "Перевод");
                exampleInput.focus();

                let addExampleBtn = document.createElement("button");
                addExampleBtn.textContent = "Добавить";

                addExampleDiv.replaceWith(inputExampleDiv);
                inputExampleDiv.append(exampleInput);
                inputExampleDiv.append(addExampleBtn);

                addExampleBtn.addEventListener("click", function () {
                    let newExample = exampleInput.value;
                    exampleInput.value = "";
                    if (newExample === ""){
                        inputExampleDiv.replaceWith(addExampleDiv);
                        return;
                    }else
                        inputExampleDiv.remove();
                    targetWord["example"] = newExample;

                    fetch(PATH + "dictionary/addExample",{
                        method:"POST",
                        body: JSON.stringify({"id":wordId, "example":newExample})
                    });


                    let exampleDiv = document.createElement("div");
                    exampleDiv.classList.add("popup-example");

                    let exampleSpan = document.createElement("span");
                    exampleSpan.innerText = newExample;

                    let deleteExampleSign = document.createElement("img");
                    deleteExampleSign.setAttribute("height", "25px");
                    deleteExampleSign.setAttribute("width", "25px");
                    deleteExampleSign.setAttribute("src", DELETE_SIGN);

                    exampleSpan.append(deleteExampleSign);
                    exampleDiv.append(exampleSpan);
                    exampleDivWrapper.append(exampleDiv);

                    deleteExampleSign.addEventListener("click", function () {
                        fetch(PATH + "dictionary/addExample",{
                            method:"POST",
                            body: JSON.stringify({"id":wordId, "example":""})
                        });
                        targetWord["example"] = "";

                        exampleDiv.remove();
                        exampleDivWrapper.append(addExampleDiv);
                    });
                })
            });

            return addExampleDiv;
        }

        function createExampleDiv() {
            let exampleDiv = document.createElement("div");
            exampleDiv.classList.add("popup-example");

            let exampleSpan = document.createElement("span");
            exampleSpan.textContent = example;
            exampleSpan.classList.add("example-span");

            let deleteExampleSign = document.createElement("img");
            deleteExampleSign.setAttribute("height", "25px");
            deleteExampleSign.setAttribute("width", "25px");
            deleteExampleSign.setAttribute("src", DELETE_SIGN);

            exampleSpan.append(deleteExampleSign);
            exampleDiv.append(exampleSpan);
            exampleDivWrapper.append(exampleDiv);

            deleteExampleSign.addEventListener("click", function () {
                fetch(PATH + "dictionary/addExample",{
                    method:"POST",
                    body: JSON.stringify({"id":wordId, "example":""})
                });

                targetWord["example"] = "";
                
                exampleDiv.remove();
                exampleDivWrapper.append(createAddExampleDiv());
            });
            return exampleDiv;
        }


        document.body.prepend(shadowDiv, popupContainer);

        popupContainer.addEventListener("click", function(){
                document.body.firstElementChild.remove();
                document.body.firstElementChild.remove();
                document.body.style.overflow = "";

                rowTarget.children[3].firstElementChild.innerText = targetWord["translations"].join(", ");
            });

        popup.addEventListener("click", (event) => event.stopPropagation());
    }
</script>

<!--MAIN JS-->
<script>
    let currentWordSet;
    // Актуальные слова (Отображаемые)
    const word_idMap = new Map();
    // Актуальные наборы слов (Отображаемые)
    const wordSets_idMap = new Map();
    let index = 1;
    let DBIndex = 0;
    const PATH = "http://localhost:8080/";
    const DELETE_SIGN = "../images/delete-sign.png";
    const PENCIL_PIC = "../images/pencil.png";
    const DOWNLOAD_PIC = "../images/download.png";

    async function init() {
        addWordsToTable(await getWordsForUser());
        addWSToSlider(await getWordSets());
        initCurrentWS();
        createSlider();
        setListeners();
        updateWSOptions();
    }

    async function addWord() {
        let wordId = await addWordForUser();
        if (currentWordSet["main"] !== true)
            addWordToWordSet(wordId);
    }
    function removeWords(wordIds){
        if (currentWordSet["main"] === true)
            removeWordForUser(wordIds);
        else
            removeWordFromWS(wordIds);
    }

    async function getWordsForUser() {
        let response = await fetch(PATH + "dictionary/getWordsForUser?index=" + DBIndex);

        if (response.status === 401){
            alert("U're not authorized");
            return;
        }

        if (response.status === 400){
            alert("Wrong index");
            return;
        }

        do{
            response = await fetch(PATH + "dictionary/getWordsForUser",{
                method: 'GET',
                headers:{
                    'handling':"true"
                }
            });

            if (response.headers.get("ready") === "false")
                await new Promise(resolve => setTimeout(resolve, 10));
        }while (response.headers.get("ready") === "false");

        if (response.ok){
            try{
                return await response.json();
            }catch (e) {}
        }
        else
            alert("Smt wrong");
        return null;
    }
    async function addWordForUser(){
        let word = {};
        word["word"] = document.getElementById("word-input").value.trim();
        word["translations"] = [document.getElementById("translation-input").value.trim()];

        let response = await fetch(PATH + "dictionary/addWordForUser",{
            method:'POST',
            body: JSON.stringify(word)
        });


        if (response.status === 401 || response.status === 400){
            alert("U're not authorized or bad request");
            return;
        }

        if (!response.ok)
            alert("Some strange mistake");

        do{
            console.log("ready " + response.headers.get("ready"));
            await new Promise(resolve => setTimeout(resolve, 10));

            response = await fetch(PATH + "dictionary/addWordForUser",{
                method: 'POST',
                headers:{
                    'handling':"true"
                }
            });
        }while (response.headers.get("ready") === "false");

        if(response.status === 400)
            alert("Данное слово уже существует");

        if (response.status === 500)
            alert("Oops smt wrong");

        if(response.ok)
            word["id"] = Number.parseInt(await response.text());

        document.getElementById("word-input").value = "";
        document.getElementById("translation-input").value = "";

        addWordsToTable([word], true);
        return word["id"];
    }
    function removeWordForUser(wordIds) {
        fetch(PATH + "dictionary/removeWordForUser?wordId=" + wordIds.join(","),{
            method:'POST',
        });
    }

    function removeWordsListener(event){
        let checkedRows = getSelectedRows();

        if (checkedRows.length === 0) {
            removeWords([event.currentTarget.closest(".words-table-row").getAttribute("word-id")]);
            event.currentTarget.closest(".words-table-row").remove();
        }
        else {
            removeWords(checkedRows.map(item => item.getAttribute("word-id")));
            checkedRows.forEach(value => value.remove());
        }

        resetIndexes();
    }
    async function exitListener() {
        await fetch(PATH + "signOut");
        window.location.href = PATH;
    }
    function setListeners(){
        document.getElementById("show").addEventListener("click",async function () {
            addWordsToTable(await getWordsForUser());
        });

        document.querySelectorAll(".cursor-pointer").forEach(elem => elem.addEventListener("click", CreateWordPopup));
    }


    function addWordsToTable(words, alone) {
        if (words === null)
            return;

        let tbody = document.querySelector("#words-table > tbody");

        let row;  //class="words-table-row"

        let tdCheckBox;
        let inpCheckBox; //type = "checkbox" class="select-word-checkbox"

        let tdIndex;    //class="index"

        let tdWord;
        let strongWord; //class="word"

        let tdTranslation;
        let strongTranslation;  //class="translation"

        let tdImg;
        let img;    //src="../images/delete-sign.png" height="30px"


        for (let word of words){
            word_idMap.set(+word["id"], word);
            if (+word["index"] > DBIndex)
                DBIndex = +word["index"];

            console.log(word['word'] + " " + word['translations'] + " " + word["index"]);
            row = document.createElement("tr");
            row.setAttribute("class", "words-table-row");
            row.setAttribute("word-id", word['id']);

            tdCheckBox = document.createElement("td");
            inpCheckBox = document.createElement("input");
            inpCheckBox.setAttribute("class", "select-word-checkbox");
            inpCheckBox.setAttribute("type", "checkbox");
            inpCheckBox.addEventListener("input", toggleAwFormAndOptions);

            tdIndex = document.createElement("td");
            tdIndex.setAttribute("class", "index");
            tdIndex.innerText = index++ + "";

            tdWord = document.createElement("td");
            tdWord.setAttribute("class", "cursor-pointer");
            strongWord = document.createElement("strong");
            strongWord.setAttribute("class", "cursor-pointer word");
            strongWord.innerText = word['word'];

            tdTranslation = document.createElement("td");
            strongTranslation = document.createElement("strong");
            strongTranslation.setAttribute("class", "cursor-pointer translation");
            strongTranslation.innerText = word['translations'].join(", ");

            tdImg = document.createElement("td");
            img = document.createElement("img");
            img.setAttribute("src", DELETE_SIGN);
            img.setAttribute("height", "30px");
            img.addEventListener("click", removeWordsListener);

            tdCheckBox.append(inpCheckBox);
            tdWord.append(strongWord);
            tdTranslation.append(strongTranslation);
            tdImg.append(img);

            row.append(tdCheckBox);
            row.append(tdIndex);
            row.append(tdWord);
            row.append(tdTranslation);
            row.append(tdImg);

            if (alone) {
                tbody.prepend(row);
                resetIndexes();
            }
            else
                tbody.append(row);
        }
    }

    function removeWordsFromTable(){
        document.querySelector("#words-table > tbody").replaceWith(document.createElement("tbody"));
    }

    function getSelectedRows() {
        let checkedRows = [];
        for (let checkBox of document.getElementsByClassName("select-word-checkbox"))
            if (checkBox.checked)
                checkedRows.push(checkBox.parentElement.parentElement);
        return checkedRows;
    }

    function resetIndexes() {
        index = 1;
        document.querySelector("#words-table > tbody").querySelectorAll(".index").forEach(elem => elem.textContent = index++ + "");
    }

    function initCurrentWS() {
        for (let ws of wordSets_idMap.values())
            if (ws["main"] === true){
                currentWordSet = ws;
                return;
            }
    }
</script>

<!--Loader-->
<script>
    function createLoader() {
        // <div class="shadow"></div>
        //
        //         <div class="loader">
        //         <canvas id="canvas" width="105px" height="105px">
        //         </canvas>
        //         <p title="Loading, please wait."></p>
        //         </div>

        let shadowDiv = document.createElement("div");
        shadowDiv.classList.add("shadow");

        let loader = document.createElement("div");
        loader.classList.add("loader");

        let canvas = document.createElement("canvas");
        canvas.setAttribute("id", "canvas");
        canvas.setAttribute("width", "105px");
        canvas.setAttribute("height", "105px");

        let p = document.createElement("p");
        p.setAttribute("title", "Загрузка...");

        document.body.prepend(shadowDiv, loader);

        loader.append(canvas);
        loader.append(p);

        document.body.style.overflow = "none";


        let cvs = document.getElementById("canvas");
        let ctx = cvs.getContext("2d");
        let sA = (Math.PI / 180) * 45;
        let sE = (Math.PI / 180) * 90;
        let ca = cvs.width;
        let ch = cvs.height;

        setInterval(function(){
            ctx.clearRect(0, 0, ca, ch);
            ctx.lineWidth = 15;

            ctx.beginPath();
            ctx.strokeStyle = "green";
            ctx.shadowColor = "darkgreen";
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 2;
            ctx.shadowBlur = 5;
            ctx.arc(50, 50, 25, 0, 360, false);
            ctx.stroke();
            ctx.closePath();

            sE += 0.05;
            sA += 0.05;

            ctx.beginPath();
            ctx.strokeStyle = "yellow";
            ctx.arc(50, 50, 25, sA, sE, false);
            ctx.stroke();
            ctx.closePath();

        }, 6);
    }

    function removeLoader() {
        document.querySelector(".shadow").remove();
        document.querySelector(".loader").remove();
        document.body.style.overflow = "none";
    }
</script>
</body>
</html>